(()=>{var e={};e.id=943,e.ids=[943],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},2694:e=>{"use strict";e.exports=require("http2")},5240:e=>{"use strict";e.exports=require("https")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},7795:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>o}),r(6167),r(6826),r(5080),r(5866);var s=r(3191),a=r(8716),i=r(7922),n=r.n(i),l=r(5231),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);r.d(t,d);let o=["",{children:["admin",{children:["(dashboard)",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,6167)),"C:\\PROJECT\\pool-reservation-frontend\\app\\admin\\(dashboard)\\dashboard\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,6826)),"C:\\PROJECT\\pool-reservation-frontend\\app\\admin\\(dashboard)\\layout.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,5080)),"C:\\PROJECT\\pool-reservation-frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\PROJECT\\pool-reservation-frontend\\app\\admin\\(dashboard)\\dashboard\\page.tsx"],u="/admin/(dashboard)/dashboard/page",m={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/(dashboard)/dashboard/page",pathname:"/admin/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},5539:(e,t,r)=>{Promise.resolve().then(r.bind(r,2264))},2833:(e,t,r)=>{Promise.resolve().then(r.bind(r,6317))},2264:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var s=r(326),a=r(7577),i=r(1292),n=r(4061),l=r(8998);let d=(0,r(2881).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);var o=r(1405),c=r(5663),u=r(7810),m=r(9729),x=r(6824);function p(){let[e,t]=(0,a.useState)([]),[r,p]=(0,a.useState)(0),[h,g]=(0,a.useState)(!0),y=async()=>{try{g(!0);let[e,r]=await Promise.all([x.PG.getAll(),x.g8.getAll()]);t(e.data),p(r.data.length)}catch(e){console.error("Error fetching dashboard data:",e)}finally{g(!1)}},v=e=>(0,u.C)(new Date(e)),j=e.filter(e=>"pending"===e.status&&!v(e.end_time)).length,f=e.filter(e=>"approved"===e.status).length,b=e.length,N=[...e].sort((e,t)=>new Date(t.start_time).getTime()-new Date(e.start_time).getTime()).slice(0,5),w=(0,m.WU)(new Date,"yyyy-MM-dd"),_=e.filter(e=>(0,m.WU)(new Date(e.start_time),"yyyy-MM-dd")===w&&"approved"===e.status),P=[{title:"Total Reservations",value:b,icon:i.Z,color:"primary"},{title:"Active Users",value:r,icon:n.Z,color:"success"},{title:"Pending Requests",value:j,icon:l.Z,color:"warning"},{title:"Approved",value:f,icon:d,color:"primary"}],C=(e,t)=>{let r=v(t);return r&&"approved"===e?s.jsx(c.Ct,{variant:"default",children:"Completed"}):r&&"pending"===e?s.jsx(c.Ct,{variant:"default",children:"Expired"}):s.jsx(c.Ct,{variant:{approved:"success",pending:"warning",rejected:"danger",cancelled:"default"}[e]||"default",children:e.charAt(0).toUpperCase()+e.slice(1)})},k=e=>new Date(e).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),q=e=>{let t=new Date(e);return(0,m.WU)(t,"MMM d, yyyy")};return h?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(o.Z,{className:"h-8 w-8 animate-spin text-primary-600"})}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),s.jsx("p",{className:"text-gray-500 mt-1",children:"Welcome back! Here's what's happening today."})]}),(0,s.jsxs)(c.zx,{variant:"outline",onClick:y,children:[s.jsx(o.Z,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),s.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-4",children:P.map(e=>s.jsx(c.Rm,{...e},e.title))}),(0,s.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-2",children:(0,s.jsxs)(c.Zb,{children:[s.jsx(c.Ol,{title:"Recent Reservations",subtitle:"Latest booking requests",action:s.jsx("a",{href:"/admin/reservations",className:"text-sm text-primary-600 hover:text-primary-700",children:"View all â†’"})}),0===N.length?s.jsx("p",{className:"text-center text-gray-500 py-8",children:"No reservations yet"}):s.jsx(c.iA,{columns:[{key:"user",header:"User",render:e=>{let t=v(e.end_time);return(0,s.jsxs)("span",{className:t?"line-through text-gray-400":"",children:[e.fName," ",e.lName]})}},{key:"date",header:"Date",render:e=>{let t=v(e.end_time);return s.jsx("span",{className:t?"line-through text-gray-400":"",children:q(e.start_time)})}},{key:"time",header:"Time",render:e=>{let t=v(e.end_time);return(0,s.jsxs)("span",{className:t?"line-through text-gray-400":"",children:[k(e.start_time)," - ",k(e.end_time)]})}},{key:"status",header:"Status",render:e=>C(e.status,e.end_time)}],data:N,keyExtractor:e=>e.reservation_id})]})}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(c.Zb,{children:[s.jsx(c.Ol,{title:"Quick Actions"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("a",{href:"/admin/reservations",className:"flex items-center gap-3 p-3 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-warning-50 flex items-center justify-center",children:s.jsx(l.Z,{className:"h-5 w-5 text-warning-600"})}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:"Pending Requests"}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:[j," reservations await review"]})]})]}),(0,s.jsxs)("a",{href:"/admin/schedules",className:"flex items-center gap-3 p-3 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-primary-50 flex items-center justify-center",children:s.jsx(i.Z,{className:"h-5 w-5 text-primary-600"})}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:"Manage Schedule"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Block or free time slots"})]})]}),(0,s.jsxs)("a",{href:"/admin/users",className:"flex items-center gap-3 p-3 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-success-50 flex items-center justify-center",children:s.jsx(n.Z,{className:"h-5 w-5 text-success-600"})}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:"Manage Users"}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:[r," registered users"]})]})]})]})]}),(0,s.jsxs)(c.Zb,{children:[s.jsx(c.Ol,{title:"Today's Schedule",subtitle:(0,m.WU)(new Date,"EEEE, MMMM d")}),0===_.length?s.jsx("p",{className:"text-center text-gray-500 py-4",children:"No reservations for today"}):s.jsx("div",{className:"space-y-2",children:_.map(e=>{let t=v(e.end_time);return(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:`font-medium ${t?"line-through text-gray-400":"text-gray-900"}`,children:[k(e.start_time)," - ",k(e.end_time)]}),(0,s.jsxs)("p",{className:`text-sm ${t?"line-through text-gray-400":"text-gray-500"}`,children:[e.fName," ",e.lName]})]}),t?s.jsx(c.Ct,{variant:"default",children:"Completed"}):s.jsx(c.Ct,{variant:"success",children:"Approved"})]},e.reservation_id)})})]})]})]})]})}},6317:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var s=r(326),a=r(3136),i=r(97),n=r(5663),l=r(5047),d=r(7577);function o({children:e}){let{user:t,isLoading:r,isAuthenticated:o,logout:c}=(0,a.a)();(0,l.useRouter)();let[u,m]=(0,d.useState)(!1);return r||!u?s.jsx(n.wY,{}):t&&"admin"===t.role?(0,s.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[s.jsx(i.Y,{onLogout:c}),s.jsx("main",{className:"ml-16 lg:ml-64 transition-all duration-300",children:s.jsx("div",{className:"p-6 lg:p-8",children:e})})]}):null}},8998:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(2881).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},1405:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(2881).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},6167:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(8570).createProxy)(String.raw`C:\PROJECT\pool-reservation-frontend\app\admin\(dashboard)\dashboard\page.tsx#default`)},6826:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(8570).createProxy)(String.raw`C:\PROJECT\pool-reservation-frontend\app\admin\(dashboard)\layout.tsx#default`)},7810:(e,t,r)=>{"use strict";r.d(t,{C:()=>a});var s=r(7120);function a(e){return+(0,s.Q)(e)<Date.now()}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[391,773,971,226,989,97],()=>r(7795));module.exports=s})();