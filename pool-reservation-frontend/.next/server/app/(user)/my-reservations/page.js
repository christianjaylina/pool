(()=>{var e={};e.id=361,e.ids=[361],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},2694:e=>{"use strict";e.exports=require("http2")},5240:e=>{"use strict";e.exports=require("https")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},6645:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>u,tree:()=>d}),t(7575),t(2550),t(5866),t(5080);var r=t(3191),a=t(8716),i=t(7922),n=t.n(i),l=t(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);t.d(s,o);let d=["",{children:["(user)",{children:["my-reservations",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,7575)),"C:\\PROJECT\\pool-reservation-frontend\\app\\(user)\\my-reservations\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,2550)),"C:\\PROJECT\\pool-reservation-frontend\\app\\(user)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,5080)),"C:\\PROJECT\\pool-reservation-frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\PROJECT\\pool-reservation-frontend\\app\\(user)\\my-reservations\\page.tsx"],x="/(user)/my-reservations/page",m={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(user)/my-reservations/page",pathname:"/my-reservations",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},5585:(e,s,t)=>{Promise.resolve().then(t.bind(t,6447))},6107:(e,s,t)=>{Promise.resolve().then(t.bind(t,8993))},6447:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d});var r=t(326),a=t(3136),i=t(97),n=t(5663),l=t(5047),o=t(7577);function d({children:e}){let{user:s,isLoading:t,isAuthenticated:d,logout:c}=(0,a.a)();(0,l.useRouter)();let[x,m]=(0,o.useState)(!1);return t||!x?r.jsx(n.wY,{}):s&&"admin"!==s.role?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx(i.w,{user:s,onLogout:c}),r.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e})]}):null}},8993:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>g});var r=t(326),a=t(7577),i=t(9729),n=t(7506),l=t(7358),o=t(8998),d=t(4061),c=t(4019),x=t(5663),m=t(6824);let u=e=>{if(!e)return"";let s=new Date(e),t=s.getHours(),r=s.getMinutes();return`${0===t?12:t>12?t-12:t}:${r.toString().padStart(2,"0")} ${t>=12?"PM":"AM"}`},p=e=>new Date(e)<new Date;function g(){let[e,s]=(0,a.useState)([]),[t,g]=(0,a.useState)(!0),[h,y]=(0,a.useState)(null),[v,j]=(0,a.useState)(null),[f,N]=(0,a.useState)(!1),[b,_]=(0,a.useState)(!1),[w,C]=(0,a.useState)("all"),[P,E]=(0,a.useState)(!1),k=async()=>{if(v)try{E(!0),await m.PG.cancel(v.reservation_id),s(e=>e.map(e=>e.reservation_id===v.reservation_id?{...e,status:"cancelled"}:e)),N(!1),j(null)}catch(e){console.error("Error cancelling reservation:",e),alert(e.response?.data?.message||"Failed to cancel reservation")}finally{E(!1)}},q=e=>r.jsx(x.Ct,{variant:{approved:"success",pending:"warning",rejected:"danger",cancelled:"default"}[e],children:e.charAt(0).toUpperCase()+e.slice(1)}),M="all"===w?e:e.filter(e=>e.status===w),R=e.filter(e=>"approved"===e.status&&new Date(e.start_time)>=new Date);return t?r.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:r.jsx(n.Z,{className:"h-8 w-8 animate-spin text-primary-600"})}):h?(0,r.jsxs)("div",{className:"p-6 rounded-xl bg-danger-50 border border-danger-200",children:[r.jsx("p",{className:"text-danger-700 font-medium",children:"Error loading reservations"}),r.jsx("p",{className:"text-danger-600 text-sm mt-1",children:h}),r.jsx(x.zx,{variant:"outline",className:"mt-4",onClick:()=>window.location.reload(),children:"Try Again"})]}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Reservations"}),r.jsx("p",{className:"text-gray-500 mt-1",children:"View and manage your pool reservations"})]}),r.jsx(x.zx,{onClick:()=>window.location.href="/availability",children:"New Reservation"})]}),r.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-4",children:["all","pending","approved","cancelled"].map(s=>{let t="all"===s?e.length:e.filter(e=>e.status===s).length;return(0,r.jsxs)("button",{onClick:()=>C(s),className:`p-4 rounded-xl border text-left transition-all ${w===s?"border-primary-500 bg-primary-50":"border-gray-200 bg-white hover:border-gray-300"}`,children:[r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t}),r.jsx("p",{className:"text-sm text-gray-500 capitalize",children:"all"===s?"Total":s})]},s)})}),R.length>0&&(0,r.jsxs)(x.Zb,{children:[r.jsx(x.Ol,{title:"Upcoming Reservations",subtitle:"Your next approved reservations"}),r.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-4",children:R.map(e=>(0,r.jsxs)("div",{className:"p-4 rounded-xl border border-gray-200 bg-gradient-to-br from-primary-50 to-white",children:[r.jsx("div",{className:"flex items-start justify-between mb-3",children:q(e.status)}),(0,r.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-gray-700",children:[r.jsx(l.Z,{className:"h-4 w-4 text-gray-400"}),r.jsx("span",{children:(0,i.WU)(new Date(e.start_time),"EEE, MMM d, yyyy")})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-gray-700",children:[r.jsx(o.Z,{className:"h-4 w-4 text-gray-400"}),(0,r.jsxs)("span",{children:[u(e.start_time)," - ",u(e.end_time)]})]}),e.guests&&(0,r.jsxs)("div",{className:"flex items-center gap-2 text-gray-700",children:[r.jsx(d.Z,{className:"h-4 w-4 text-gray-400"}),(0,r.jsxs)("span",{children:[e.guests," guest(s)"]})]})]}),r.jsx("div",{className:"flex gap-2 mt-4",children:(0,r.jsxs)(x.zx,{variant:"ghost",size:"sm",className:"flex-1 text-danger-600 hover:bg-danger-50",onClick:()=>{j(e),N(!0)},children:[r.jsx(c.Z,{className:"h-4 w-4 mr-1"}),"Cancel"]})})]},e.reservation_id))})]}),(0,r.jsxs)(x.Zb,{children:[r.jsx(x.Ol,{title:"Reservation History",subtitle:`Showing ${M.length} reservations`}),r.jsx(x.iA,{columns:[{key:"date",header:"Date",sortable:!0,render:e=>r.jsx("span",{className:p(e.end_time)?"line-through text-gray-400":"",children:(0,i.WU)(new Date(e.start_time),"MMM d, yyyy")})},{key:"time",header:"Time",render:e=>(0,r.jsxs)("span",{className:p(e.end_time)?"line-through text-gray-400":"",children:[u(e.start_time)," - ",u(e.end_time)]})},{key:"guests",header:"Guests",sortable:!0,render:e=>r.jsx("span",{className:p(e.end_time)?"line-through text-gray-400":"",children:e.guests||"-"})},{key:"status",header:"Status",render:e=>r.jsx("span",{className:p(e.end_time)?"opacity-50":"",children:q(e.status)})},{key:"actions",header:"Actions",render:e=>p(e.end_time)?r.jsx("span",{className:"text-sm text-gray-400 italic",children:"approved"===e.status?"Completed":"-"}):"pending"===e.status||"approved"===e.status?r.jsx("div",{className:"flex gap-2",children:r.jsx(x.zx,{variant:"ghost",size:"sm",onClick:()=>{j(e),N(!0)},children:"Cancel"})}):e.rejection_reason?r.jsx("span",{className:"text-sm text-gray-500",children:e.rejection_reason}):r.jsx("span",{className:"text-sm text-gray-400",children:"-"})}],data:M,keyExtractor:e=>e.reservation_id,emptyMessage:"No reservations found",rowClassName:e=>p(e.end_time)?"bg-gray-50":""})]}),r.jsx(x.u_,{isOpen:f,onClose:()=>N(!1),title:"Cancel Reservation",children:(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("p",{className:"text-gray-600",children:"Are you sure you want to cancel this reservation?"}),v&&(0,r.jsxs)("div",{className:"p-4 bg-gray-50 rounded-xl space-y-2 text-sm",children:[(0,r.jsxs)("p",{children:[r.jsx("strong",{children:"Date:"})," ",(0,i.WU)(new Date(v.start_time),"EEEE, MMMM d, yyyy")]}),(0,r.jsxs)("p",{children:[r.jsx("strong",{children:"Time:"})," ",u(v.start_time)," - ",u(v.end_time)]})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[r.jsx(x.zx,{variant:"outline",className:"flex-1",onClick:()=>N(!1),children:"Keep Reservation"}),r.jsx(x.zx,{variant:"danger",className:"flex-1",onClick:k,loading:P,children:"Cancel Reservation"})]})]})}),r.jsx(x.u_,{isOpen:b,onClose:()=>_(!1),title:"Reschedule Reservation",size:"lg",children:(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("p",{className:"text-gray-600",children:"Select a new date and time for your reservation."}),r.jsx(x.II,{type:"date",label:"New Date"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(x.II,{type:"time",label:"Start Time"}),r.jsx(x.II,{type:"time",label:"End Time"})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[r.jsx(x.zx,{variant:"outline",className:"flex-1",onClick:()=>_(!1),children:"Cancel"}),r.jsx(x.zx,{className:"flex-1",children:"Submit Request"})]})]})})]})}},8998:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(2881).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},2550:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(8570).createProxy)(String.raw`C:\PROJECT\pool-reservation-frontend\app\(user)\layout.tsx#default`)},7575:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(8570).createProxy)(String.raw`C:\PROJECT\pool-reservation-frontend\app\(user)\my-reservations\page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[391,773,971,226,989,97],()=>t(6645));module.exports=r})();